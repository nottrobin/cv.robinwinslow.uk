{% load staticfiles %}
<!doctype html>

<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">
       
        <title>{% block title %}{% endblock %} | Robin Winslow</title>
        
        {% if page.description %}<meta name="description" content="{{ page.description }}">{% endif %}

        <script>
            function getJson(url, callback)
            {
                var request = window.ActiveXObject ? new ActiveXObject("Microsoft.XMLHTTP") : new XMLHttpRequest();

                request.onreadystatechange = function() {
                    if (request.readyState === 4) {
                        callback(request.responseText);
                    }
                }

                request.open('GET', url, true)
                request.send()
            }
        </script>

        <link rel="stylesheet" href="{% static 'cv/css/fonts.css' %}" />
        <link rel="stylesheet" href="{% static 'cv/css/font-awesome.css' %}" />
        <link rel="stylesheet" href="{% static 'cv/css/global.css' %}" />
    </head>

    <body>
        <header>
            <nav class="external-navigation">
                <ul>
                    <li><a href="http://robinwinslow.co.uk" class="fa fa-pencil">My blog</a></li>
                    <li><a href="https://github.com/nottrobin" class="fa fa-github">
                        Github <small id="js-replace-repos"></small>
                    </a></li>
                    <li><a href="http://stackoverflow.com/users/613540/robin-winslow" class="fa fa-stack-exchange">
                        StackExchange <small id="js-replace-rep"></small>
                    </a></li>
                    <li><a href="https://twitter.com/nottrobin" class="fa fa-twitter">Twitter</a></li>
                </ul>
            </nav>

            <h1 class="email headline">
                <a href="mailto:robin@robinwinslow.co.uk">
                    <small>robin@</small>robinwinslow.<small>co.uk</small>
                </a>
            </h1>

            <script>
                getJson(
                    '{% url "profiles" %}',
                    function(profilesJson) {
                        var profiles = JSON ? JSON.parse(profilesJson) : eval('(' + profilesJson + ')');

                        document.getElementById('js-replace-repos').innerHTML = profiles.repositories + " repos";
                        document.getElementById('js-replace-rep').innerHTML = profiles.reputation + " reputation";
                    }
                );
            </script>
        </header>

        <nav class="site-navigation">
            <ul>
                <li><a href="{% url 'home' %}">Summary</a></li>
                <li><a href="{% url 'roles' %}">Recent roles</a></li>
                <li><a href="{% url 'education' %}">Education</a></li>
                <li><a href="{% url 'client_side' %}">Client-side skills</a></li>
                <li><a href="{% url 'server_side' %}">Server-side skills</a></li>
                <li><a href="{% url 'publications' %}">Publications</a></li>
                <li><a href="{% url 'about_me' %}">About me</a></li>
            </ul>
        </nav>

        <main>
        {% block content %}{% endblock %}
        </main>

        <footer>
            <aside>
                <p class="side">Please <a href="http://creativecommons.org/licenses/by-sa/3.0/">copy, modify and reshare</a> my work.</p>
                <p>By <a href="https://plus.google.com/104026832761488144614" rel="author">Robin Winslow</a></a>
            </aside>
        </footer>
    </body>
</html>
